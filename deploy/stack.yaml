services:
  frechekoepfe-frontend:
    image: ghcr.io/mardu-systems/mardu-de-frontend:{{ .Env.IMAGE_TAG }}
    description: "mardu.de frontend"
    ports:
      - "3000/tcp"
    envs:
      NODE_ENV: production
      NITRO_PORT: "3000"
      NITRO_HOST: "0.0.0.0"
    restart_policy: unless-stopped
    health_check:
      test: ["CMD", "node", "-e", "http.get('http://localhost:3000/', (res) => { process.exit(res.statusCode === 200 ? 0 : 1) })"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s